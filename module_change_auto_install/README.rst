===============================
Change auto installable modules
===============================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:7943294cf1eab655c4a2f081c36f770d517592994d25295d75934682838cc372
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fserver--tools-lightgray.png?logo=github
    :target: https://github.com/OCA/server-tools/tree/18.0/module_change_auto_install
    :alt: OCA/server-tools
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/server-tools-18-0/server-tools-18-0-module_change_auto_install
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
    :target: https://runboat.odoo-community.org/builds?repo=OCA/server-tools&target_branch=18.0
    :alt: Try me on Runboat

|badge1| |badge2| |badge3| |badge4| |badge5|

In odoo, by default some modules are marked as auto installable by the
``auto_install`` key present in the manifest.

-  This feature is very useful for "glue" modules that allow two modules
   to work together. (A typical example is ``sale_stock`` which allows
   ``sale`` and ``stock`` modules to work together).
-  However, Odoo SA also marks some modules as auto installable, even
   though this is not technically required. This can happen for modules
   the company wants to promote like ``iap``, modules with a big wow
   effect like ``partner_autocomplete``, or some modules they consider
   useful by default like ``account_edi``. See the discussion:
   https://github.com/odoo/odoo/issues/71190

This module allows to change by configuration, the list of auto
installable modules, adding or removing some modules to auto install.

**Table of contents**

.. contents::
   :local:

Installation
============

You don't have to install this module. To make the features working :

-  make the module ``module_change_auto_install`` available in your
   addons path
-  either update your ``odoo.cfg`` or set the environment variables
   following the "Configure" section

Configuration
=============

-  Edit your ``odoo.cfg`` configuration file:
-  Add the module ``module_change_auto_install`` in the
   ``server_wide_modules`` list.
-  (optional) Add a new entry ``modules_auto_install_disabled`` to mark
   a list of modules as NOT auto installable. The environment variable
   ``ODOO_MODULES_AUTO_INSTALL_DISABLED`` can also be set.
-  (optional) Add a new entry ``modules_auto_install_enabled`` to mark a
   list of modules as auto installable. This feature can be usefull for
   companies that are hosting a lot of Odoo instances for many
   customers, and want some modules to be always installed. The
   environment variable ``ODOO_MODULES_AUTO_INSTALL_ENABLED`` can also
   be set.

The values in the configuration file takes precedence over the
environment variable values.

**Typical Settings**

.. code:: cfg

   server_wide_modules = web,module_change_auto_install

   modules_auto_install_disabled =
       partner_autocomplete,
       iap,
       mail_bot

   modules_auto_install_enabled =
       web_responsive:web,
       base_technical_features,
       disable_odoo_online,
       account_usability

When using environment variables, the same configuration is:

.. code:: shell

   export ODOO_MODULES_AUTO_INSTALL_DISABLED=partner_autocomplete,iap,mail_bot
   export ODOO_MODULES_AUTO_INSTALL_ENABLED=web_responsive:web,base_technical_features,disable_odoo_online,account_usability

Run your instance and check logs. Modules that has been altered should
be present in your log, at the load of your instance:

.. code:: shell

   INFO db_name odoo.addons.module_change_auto_install.patch: Module 'iap' has been marked as NOT auto installable.
   INFO db_name odoo.addons.module_change_auto_install.patch: Module 'mail_bot' has been marked as NOT auto installable.
   INFO db_name odoo.addons.module_change_auto_install.patch: Module 'partner_autocomplete' has been marked as NOT auto installable.
   INFO db_name odoo.modules.loading: 42 modules loaded in 0.32s, 0 queries (+0 extra)

**Advanced Configuration Possibilities**

if your ``odoo.cfg`` file contains the following configuration:

.. code:: cfg

   modules_auto_install_enabled =
       account_usability,
       web_responsive:web,
       base_technical_features:,
       point_of_sale:sale/purchase

The behaviour will be the following:

-  ``account_usability`` module will be installed as soon as all the
   default dependencies are installed. (here ``account``)
-  ``web_responsive`` module will be installed as soon as ``web`` is
   installed. (Althought ``web_responsive`` depends on ``web`` and
   ``mail``)
-  ``base_technical_features`` will be ALWAYS installed
-  ``point_of_sale`` module will be installed as soon as ``sale`` and
   ``purchase`` module are installed.

When using environment variables, the same configuration is:

.. code:: shell

   export ODOO_MODULES_AUTO_INSTALL_ENABLED=account_usability,web_responsive:web,base_technical_features:,point_of_sale:sale/purchase

Development
===========

If you upgrade your odoo Instance from a major version to another, using
the OCA Free Software project "OpenUpgrade", you can also use this
module during the upgrade process, to avoid the installation of useless
new modules.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/server-tools/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OCA/server-tools/issues/new?body=module:%20module_change_auto_install%0Aversion:%2018.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* GRAP

Contributors
------------

-  Sylvain LE GAL <https://twitter.com/legalsylvain>

-  XCG Consulting, part of `Orbeet <https://orbeet.io/>`__:

   -  Vincent Hatakeyama <vincent.hatakeyama@xcg-consulting.fr>

Maintainers
-----------

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

.. |maintainer-legalsylvain| image:: https://github.com/legalsylvain.png?size=40px
    :target: https://github.com/legalsylvain
    :alt: legalsylvain

Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:

|maintainer-legalsylvain| 

This module is part of the `OCA/server-tools <https://github.com/OCA/server-tools/tree/18.0/module_change_auto_install>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
