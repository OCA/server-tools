<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="attachment_sync_rule_form" model="ir.ui.view">
        <field name="name">attachment.sync.rule.view.form</field>
        <field name="model">ir.attachment.sync.rule</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="run_sync_now" type="object" class="oe_highlight" string="Sync Now"
                        attrs="{'invisible':[('active', '=', False)]}"/>
                    <button name="queue_for_sync" type="object"
                        class="oe_highlight" string="Queue for Sync"
                        attrs="{'invisible':[('active', '=', False)]}"/>
                </header>
                <sheet>
                 <div class="oe_button_box" name="button_box">
                    <button name="toggle_active" type="object" groups="base.group_user"
                            class="oe_stat_button" icon="fa-archive">
                        <field name="active" widget="boolean_button"
                            options='{"terminology": "archive"}'/>
                    </button>
                 </div>
                <group name="top">
                    <group name="left">
                        <field name="name"/>
                        <field name="source_model"/>
                        <field name="location_id"/>
                        <field name="sync_type"/>
                    </group>
                    <group name="right">
                        <field name="sequence"/>
                        <field name="domain" placeholder="[('field_name','condition', value)]"/>
                        <field name="file_name_format" placeholder="${object.name}"/>
                        <field name="last_sync_date"/>
                    </group>
                    <separator string="Tasks" colspan="4"/>
                </group>
                <group>
                    <field name="task_ids" colspan="4" nolabel="1">
                        <tree editable="bottom">
                            <field name="name"/>
                            <field name="name"/>
                            <field name="method_type"/>
                            <field name="filename"/>
                            <field name="filepath"/>
                        </tree>
                    </field>
                </group>
                </sheet>
            </form>
        </field>
      </record>
    <record id="attachment_sync_rule_tree" model="ir.ui.view">
        <field name="name">attachment.sync.rule.view.tree</field>
        <field name="model">ir.attachment.sync.rule</field>
        <field name="arch" type="xml">
            <tree string="Attachment Sync Rules">
                <field name="sequence"/>
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="source_model"/>
                <field name="location_id"/>
                <field name="sync_type"/>
                <field name="last_sync_date"/>
                <field name="active"/>
            </tree>
        </field>
      </record>

    <record id="attachment_sync_rule_action" model="ir.actions.act_window">
        <field name="name">Attachment Sync Rules</field>
        <field name="res_model">ir.attachment.sync.rule</field>
        <field name="view_type">form</field>
        <field name='view_mode'>tree,form</field>
        <field name="view_id" ref="attachment_sync_rule_tree"/>
        <field name="context">{'active_test': False}</field>
    </record>

    <menuitem
        id="main_menu_external_backup"
        name="External Backup"
        parent="base.menu_administration"
        groups="group_backup_management"/>

    <menuitem
        id="attachment_sync_rules"
        name="Attachment Sync Rules"
        action="attachment_sync_rule_action"
        parent="main_menu_external_backup"
        sequence="1"/>
</odoo>